<!--pages/more/shared/chat.wxml-->
<view class="container">
    <view class="nav-tabs">
        <view class="tab-item {{active_type === 'forum' ? 'active' : ''}}" data-type="forum" bindtap="switchType">
        <text>论坛</text>
        </view>

        <view class="tab-item {{active_type === 'groupChat' ? 'active' : ''}}" data-type="groupChat" bindtap="switchType">
        <text>群聊</text>
        <!--<view wx:if="{{count.foundMailCount}}" class="count">
            <text>{{count.foundMailCount}}</text>
        </view>-->
        <view class="count">
            <text>3</text>
        </view>
        </view>
  </view>
  <!--<view class="groupChat">
    
    <view class="chatArea">
        <view class="status-remind">{{status_remind}}</view>
        <view class="msg-log" wx:for="{{record}}" wx:key="id">
            <view class="msg-log-item">
                <view class="msg-header">
                    <text class="msg-header-name">{{item.user.nickName}}</text>
                    <text class="msg-header-time">{{item.createTime}}</text>
                </view>
                <view class="msg-body">
                    <view class="msg-body-avatar">
                        <image src="{{item.user.avatarUrl}}"></image>
                    </view>
                    <view class="msg-body-content">{{item.content}}</view>
                </view>
            </view>

        </view>
    </view>
    
    <view class="inputArea {{search_active ? 'active' : ''}}">
      <view class="add" bindtap="addPhoto">
        <image src="/images/more/add.png"></image>
      </view>
      <textarea class="inputArea-textarea" value="{{msg_content}}" placeholder="说点什么吧..." placeholder-class="inputArea-placeholder" maxlength="200" auto-height="true" bindinput="msgContent"></textarea>
      <view class="send-btn" bindtap="sendMsg">
        <image src="/images/index/enter.png"></image>
      </view>
    </view>

  </view>-->
    <scroll-view class="chat-container" scroll-y scroll-into-view="{{lastMessageId}}" scroll-top="9999999999">
            <view wx:for="{{record}}" wx:for-item="message" wx:key="id" id="{{message.id}}" class="message {{message.type}}">
                <view wx:if="{{message.type == 'speak'}}" class="user-message {{message.user.id ===  user.id ? 'me' : 'other'}}">
                    <image class="avatar" src="{{message.user.avatarUrl}}" mode="aspectFill"></image>
                    <view class="text">
                        <view class="text-header">
                            <view class="nickname">{{message.user.nickName}}</view>
                            <view class="createTime">{{message.createTime}}</view>
                        </view>
                        <view class="content">{{message.content}}</view>
                    </view>
                </view>
                <view wx:if="{{message.type == 'system'}}" class="system-message">
                    {{message.content}}
                </view>
            </view>
    </scroll-view>
    <view class="input-panel">
        <button class="pic-icon"></button>
        <input type="text" value="{{inputContent}}" bindchange="changeInputContent" class="send-input"></input>
        <button bindtap="sendMessage" class="send-btn">发送</button>
    </view>
</view>
